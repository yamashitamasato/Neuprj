<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Neu game|play</title>
  </head>
  <body>
    <center>
      <h3 id="cardsum">0</h3>

    <button onClick="cardsubmit(card1);" style="width:30%;height:150px" id="card1" ></button>
    <button onClick="cardsubmit(card2);" style="width:30%;height:150px" id="card2"></button>
    <button onClick="cardsubmit(card3);" style="width:30%;height:150px" id="card3"></button>
    </center>
  </body>
</html>
<script src="/socket.io/socket.io.js"></script>
<script type="text/javascript">
  // 1.イベントとコールバックの定義
  //var cardkind=['1','2','3','4','5','6','7','8','9','10','-1','-10','101']
  var cardkind=[['1','2','3','4','5','6','7','8','9'],['10'],['50','-1'],['-10'],['101']]
  var cardnum=[3,6,2,4,5]
  var cardlist=[]
  for (  var i = 0;  i < cardkind.length;  i++  ) {
    for (var j=0; j < cardkind[i].length;j++){
      cardlist=cardlist.concat(Array(cardnum[i]).fill(cardkind[i][j]));
    }
  }
  var socketio = io.connect('http://localhost:8080');

  socketio.on("connected", function(name) {});
  socketio.on("publish", function (data) { addMessage(data.value); });
  socketio.on("disconnect", function () {});
  socketio.on("cardupdate",function(card){
    document.getElementById('cardsum').innerHTML=card.value;
  });
  // 2.イベントに絡ませる関数の定義
  function start(name) {
    socketio.emit("connected", name);
  }
  function cardsubmit(card){
    //console.log(card.id);
    socketio.emit("submitcard",document.getElementById(card.id).textContent)
    //document.getElementById('cardsum').innerHTML =Number(document.getElementById('cardcount').innerHTML)+Number(document.getElementById(card.id).textContent);
    document.getElementById(card.id).innerHTML = cardlist[Math.floor(Math.random()*cardlist.length)];
  }
  window.onload = function(){
    document.getElementById('card1').textContent=cardlist[Math.floor(Math.random()*cardlist.length)];
    document.getElementById('card2').textContent=cardlist[Math.floor(Math.random()*cardlist.length)];
    document.getElementById('card3').textContent=cardlist[Math.floor(Math.random()*cardlist.length)];
  }

  // 3.開始処理
  //var msgArea = document.getElementById("msg");
  //var myName = Math.floor(Math.random()*100000) ;
  //addMessage("貴方は" + myName + "さんとして入室しました");
  //start(myName);
</script>
